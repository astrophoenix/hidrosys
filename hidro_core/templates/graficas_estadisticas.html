<!DOCTYPE html>
<html>
  <head>
    <title>Bootstrap Admin Theme v3</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- jQuery UI -->
    <link href="https://code.jquery.com/ui/1.10.3/themes/redmond/jquery-ui.css" rel="stylesheet" media="screen">

    <!-- Bootstrap -->
    <link href="{{ STATIC_URL }}bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- styles -->
    <link href="{{ STATIC_URL }}css/styles.css" rel="stylesheet">

    <link href="{{ STATIC_URL }}css/stats.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="header">
       <div class="container">
          <div class="row">
             <div class="col-md-5">
                <!-- Logo -->
                <div class="logo">
                   <h1><a href="index.html">Bootstrap Admin Theme</a></h1>
                </div>
             </div>
             <div class="col-md-5">
                <div class="row">
                  <div class="col-lg-12">
                    <div class="input-group form">
                         <input type="text" class="form-control" placeholder="Search...">
                         <span class="input-group-btn">
                           <button class="btn btn-primary" type="button">Search</button>
                         </span>
                    </div>
                  </div>
                </div>
             </div>
             <div class="col-md-2">
                <div class="navbar navbar-inverse" role="banner">
                    <nav class="collapse navbar-collapse bs-navbar-collapse navbar-right" role="navigation">
                      <ul class="nav navbar-nav">
                        <li class="dropdown">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">My Account <b class="caret"></b></a>
                          <ul class="dropdown-menu animated fadeInUp">
                            <li><a href="profile.html">Profile</a></li>
                            <li><a href="login.html">Logout</a></li>
                          </ul>
                        </li>
                      </ul>
                    </nav>
                </div>
             </div>
          </div>
       </div>
  </div>

    <div class="page-content">
      <div class="row">
      <div class="col-md-2">
        <div class="sidebar content-box" style="display: block;">
           {% csrf_token %}
                <ul class="nav">
                    <!-- Main menu -->
                    <li><a href="index.html"><i class="glyphicon glyphicon-home"></i> Dashboard</a></li>
                    <!-- <li><a href="calendar.html"><i class="glyphicon glyphicon-calendar"></i> Calendar</a></li>
                    <li class="current"><a href="stats.html"><i class="glyphicon glyphicon-stats"></i> Statistics (Charts)</a></li>
                    <li><a href="tables.html"><i class="glyphicon glyphicon-list"></i> Tables</a></li>
                    <li><a href="buttons.html"><i class="glyphicon glyphicon-record"></i> Buttons</a></li>
                    <li><a href="editors.html"><i class="glyphicon glyphicon-pencil"></i> Editors</a></li>
                    <li><a href="forms.html"><i class="glyphicon glyphicon-tasks"></i> Forms</a></li> -->
                    <li class="submenu">
                         <a href="#">
                            <i class="glyphicon glyphicon-list"></i> Pages
                            <span class="caret pull-right"></span>
                         </a>
                         <!-- Sub menu -->
                         <ul>
                            <li><a href="login.html">Login</a></li>
                            <li><a href="signup.html">Signup</a></li>
                        </ul>
                    </li>
                </ul>
             </div>
      </div>
      <div class="col-md-10">

        <!-- <div class="content-box-large">
          <div class="panel-heading">
           <div class="panel-title">Temperatura vs Tiempo</div>
          
          <div class="panel-options">
            <a href="#" data-rel="collapse"><i class="glyphicon glyphicon-refresh"></i></a>
            <a href="#" data-rel="reload"><i class="glyphicon glyphicon-cog"></i></a>
          </div>
        </div>
          <div class="panel-body">
            <div id="hero-area" style="height: 230px;"></div>
          </div>
        </div> -->

        <div class="content-box-large">
          <div class="panel-heading">
          <div class="panel-title">Temperatura vs Tiempo Astro </div>
          
          <div class="panel-options">
            <a href="#" data-rel="collapse"><i class="glyphicon glyphicon-refresh"></i></a>
            <a href="#" data-rel="reload"><i class="glyphicon glyphicon-cog"></i></a>
          </div>
        </div>
          <div class="panel-body">
            <div id="hero-graph" style="height: 230px;"></div>
          </div>
        </div>

        <!-- <div class="content-box-large">
          <div class="panel-heading">
          <div class="panel-title">Morris.js Bar & Donut</div>
          
          <div class="panel-options">
            <a href="#" data-rel="collapse"><i class="glyphicon glyphicon-refresh"></i></a>
            <a href="#" data-rel="reload"><i class="glyphicon glyphicon-cog"></i></a>
          </div>
        </div>
          <div class="panel-body">
            <div class="row">
              <div class="col-md-6">
                <div id="hero-bar" style="height: 230px;"></div>
              </div>
              <div class="col-md-3">
                <div id="hero-donut" style="height: 230px;"></div>
              </div>
              <div class="col-md-3">
                <div id="hero-donut2" style="height: 230px;"></div>
              </div>
            </div>
          </div>
        </div> -->

        <!-- <div class="content-box-large" style="diplay:none">
          <div class="panel-heading">
          <div class="panel-title">jQuery Knob</div>
          
          <div class="panel-options">
            <a href="#" data-rel="collapse"><i class="glyphicon glyphicon-refresh"></i></a>
            <a href="#" data-rel="reload"><i class="glyphicon glyphicon-cog"></i></a>
          </div>
        </div>
          <div class="panel-body">
            <div class="row">
              <div class="col-md-3">
                <input type="text" value="50" class="knob second" data-thickness=".3" data-inputColor="#333" data-fgColor="#30a1ec" data-bgColor="#d4ecfd" data-width="150">
              </div>
              <div class="col-md-3">
                <input type="text" value="75" class="knob second" data-thickness=".3" data-inputColor="#333" data-fgColor="#8ac368" data-bgColor="#c4e9aa" data-width="150">
              </div>
              <div class="col-md-3">
                <input type="text" value="35" class="knob second" data-thickness=".3" data-inputColor="#333" data-fgColor="#5ba0a3" data-bgColor="#cef3f5" data-width="150">
              </div>
              <div class="col-md-3">
                <input type="text" value="85" class="knob second" data-thickness=".3" data-inputColor="#333" data-fgColor="#b85e80" data-bgColor="#f8d2e0" data-width="150">
              </div>
            </div>
          </div>
        </div> -->

        <!-- <div class="row">
          <div class="col-md-6">
            <div class="content-box-large">
              <div class="panel-heading">
              <div class="panel-title">Pie Chart</div>
              
              <div class="panel-options">
                <a href="#" data-rel="collapse"><i class="glyphicon glyphicon-refresh"></i></a>
                <a href="#" data-rel="reload"><i class="glyphicon glyphicon-cog"></i></a>
              </div>
            </div>
              <div class="panel-body">
                <div id="piechart1" style="width:100%;height:200px"></div>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="content-box-large">
              <div class="panel-heading">
              <div class="panel-title">Pie Chart</div>
              
              <div class="panel-options">
                <a href="#" data-rel="collapse"><i class="glyphicon glyphicon-refresh"></i></a>
                <a href="#" data-rel="reload"><i class="glyphicon glyphicon-cog"></i></a>
              </div>
            </div>
              <div class="panel-body">
                <div id="piechart2" style="width:100%;height:200px"></div>
              </div>
            </div>
          </div>
        </div> -->

        <!-- <div class="row">
          <div class="col-md-6">
            <div class="content-box-large">
              <div class="panel-heading">
              <div class="panel-title">Bar Chart</div>
              
              <div class="panel-options">
                <a href="#" data-rel="collapse"><i class="glyphicon glyphicon-refresh"></i></a>
                <a href="#" data-rel="reload"><i class="glyphicon glyphicon-cog"></i></a>
              </div>
            </div>
              <div class="panel-body">
                <div id="catchart" style="width:100%;height:300px"></div>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="content-box-large">
              <div class="panel-heading">
              <div class="panel-title">Multiple axes</div>
              
              <div class="panel-options">
                <a href="#" data-rel="collapse"><i class="glyphicon glyphicon-refresh"></i></a>
                <a href="#" data-rel="reload"><i class="glyphicon glyphicon-cog"></i></a>
              </div>
            </div>
              <div class="panel-body">
                <div id="timechart" style="width:100%;height:300px"></div>
              </div>
            </div>
          </div>
        </div>
      </div> -->
    </div>
    </div>

    <footer>
         <div class="container">
         
            <div class="copy text-center">
               Copyright 2014 <a href='#'>Website</a>
            </div>
            
         </div>
      </footer>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- jQuery UI -->
    <script src="https://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="{{ STATIC_URL }}bootstrap/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="{{ STATIC_URL }}vendors/morris/morris.css">


    <script src="{{ STATIC_URL }}vendors/jquery.knob.js"></script>
    <script src="{{ STATIC_URL }}vendors/raphael-min.js"></script>
    <script src="{{ STATIC_URL }}vendors/morris/morris.min.js"></script>

    <script src="{{ STATIC_URL }}vendors/flot/jquery.flot.js"></script>
    <script src="{{ STATIC_URL }}vendors/flot/jquery.flot.categories.js"></script>
    <script src="{{ STATIC_URL }}vendors/flot/jquery.flot.pie.js"></script>
    <script src="{{ STATIC_URL }}vendors/flot/jquery.flot.time.js"></script>
    <script src="{{ STATIC_URL }}vendors/flot/jquery.flot.stack.js"></script>
    <script src="{{ STATIC_URL }}vendors/flot/jquery.flot.resize.js"></script>

    
    <script src="{{ STATIC_URL }}js/stats.js"></script>
    <script type="text/javascript">
          function obtener_datos_medidos_equipo() {
            //console.info("genera grafic");
            var url_view = "{% url 'hidro_core.views.obtener_datos_medidos_equipo' equipo_mediciones.0.equipo.id %}";
            $.ajax({
                url : url_view, // the endpoint
                type : "GET", // http method
                // handle a successful response
                success : function(data)
                {
                    // Morris Line Chart
                    // var tax_data = [
                    //     {"period": "2013-04", "visits": 2407, "signups": 660},
                    //     {"period": "2013-03", "visits": 3351, "signups": 729},
                    //     {"period": "2013-02", "visits": 2469, "signups": 1318},
                    //     {"period": "2013-01", "visits": 2246, "signups": 461},
                    //     {"period": "2012-12", "visits": 3171, "signups": 1676},
                    //     {"period": "2012-11", "visits": 2155, "signups": 681},
                    //     {"period": "2012-10", "visits": 1226, "signups": 620},
                    //     {"period": "2012-09", "visits": 2245, "signups": 500}
                    // ];
                    // Morris.Line({
                    //     element: 'hero-graph',
                    //     data: tax_data,
                    //     xkey: 'period',
                    //     xLabels: "month",
                    //     ykeys: ['visits', 'signups'],
                    //     labels: ['Visits', 'User signups']
                    // });
                    $("#hero-graph").html(" ");
                    var tax_data = [];
                    for (var i = 0; i < data.length; i++) {
                      var date = new Date(data[i].fields.fecha_creacion);
                      var fecha_creacion = date.getTime();
                      //console.info(fecha_creacion)
                      var temperatura = data[i].fields.temperatura;
                      var humedad = data[i].fields.humedad;
                      var intensidad_luz = data[i].fields.intensidad_luz;
                      //console.info(fecha_creacion)
                      tax_data.push({
                        fecha_creacion:fecha_creacion,
                        temperatura: temperatura, 
                        humedad: humedad, 
                        intensidad_luz: intensidad_luz,
                      });
                      
                    };

                    Morris.Line({
                        element: 'hero-graph',
                        data: tax_data,
                        xkey: 'fecha_creacion',
                        xLabels: "hora",
                        ykeys: ['temperatura', 'humedad', 'intensidad_luz'],
                        labels: ['Temperatura', 'Humedad', 'Luz']
                    });
                },

                // handle a non-successful response
                error : function(xhr,errmsg,err) {
                    console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console

                    // $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    //     " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                }
            });
        }

    $(function(){
        obtener_datos_medidos_equipo();
        setInterval(obtener_datos_medidos_equipo, 3000);
    });
    </script>
  </body>
</html>